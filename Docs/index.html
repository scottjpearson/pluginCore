<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CORE Documentation</title>

    <style type='text/css' media='all'>@import url('../userguide.css');</style>
    <link rel='stylesheet' type='text/css' media='all' href='userguide.css' />

    <meta http-equiv='expires' content='-1' />
    <meta http-equiv= 'pragma' content='no-cache' />
    <meta name='robots' content='all' />
    <meta name='author' content='ExpressionEngine Dev Team' />
    <meta name='description' content='CodeIgniter User Guide' />

</head>
<body>


<br clear="all" />


<!-- START CONTENT -->
<div id="content">

    <h1>Getting Started</h1>

    <p>The CORE:: libraries and helpers are designed to ensure that highly reusable code is can be quickly and easily accessed across multiple plugin implementations.</p>

    <h2>Including the CORE</h2>

    <h3>GIT Checkout</h3>
    <p>The CORE can be checked out from the Assembla GIT repository found at: </p>
    <code>git@git.assembla.com:victr-dots.plugin_core.git</code>

    <h3>Bootstrap</h3>
    <p>Once you have pulled the CORE from GIT you need to include the bootstrap.php file into your project files.  Assuming the Core directory was on level above your codes root folder you could use the following code.</p>

    <code>
        include '../Core/bootstrap.php';
    </code>

    <h2>Using $CORE->Libraries</h2>

    <h3>Including:</h3>
    <p>Libraries in CORE act as collections of common functionality organized into classes.  To include a library for use by the CORE you can either define a single library or an array of libraries.</p>

    <code>
        // Include single library<br/>
        $Core->Libraries('Rdws');<br/>
        <br/><br/>
        // Include array of libraries<br/>
        $Core->Libraries(array('Rdws','Project'));<br/>
    </code>

    <h3>Usage:</h3>
    <p>Once included into the CORE a library can be accessed using its name as an object on the CORE;</p>

    <code>
        // Calling the Rdws library from the Core<br/>
        $encrypted = new $Core->Rdws();
    </code>

    <p>The library can also be accessed directly</p>

    <code>
        // Calling the Rdws library directly<br/>
        $encrypted = new Rdws();
    </code>

    <h3>Libraries:</h3>
    <table cellpadding="0" cellspacing="1" border="0" style="width:100%" class="tableborder">
        <tr>
            <th style="width:50%;">&nbsp;</th>
            <th style="width:50%;">&nbsp;</th>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="rdws.html">Rdws (RD Web Service)</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="#">Arm</a></li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="#">Collection</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="#">Core</a></li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="#">Event</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="#">Metadata</a></li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="#">Proj</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="#">Project</a></li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="#">Record</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="#">RedcapData</a></li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="#">RedcapLog</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="#">RestCallRequest</a></li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="#">Role</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="#">User_Rights</a></li>
                </ul>
            </td>
        </tr>
    </table>

    <h2>Using $CORE->Helpers</h2>

    <h3>Including:</h3>
    <p>Helpers in CORE act as collections of common functions.  To include a helper for use by the CORE you can either define a single helper or an array of helpers.</p>

    <code>
        // Include single helper<br/>
        $Core->Helpers('Encryption');<br/>
        <br/><br/>
        // Include array of helpers<br/>
        $Core->Helpers(array('Encryption','getPassthruUrl'));<br/>
    </code>

    <h3>Usage:</h3>
    <p>Once included into the CORE a helper can be accessed by simply calling the included function;</p>

    <code>
        // Calling the Encryption function(s) from the Core<br/>
        $str = encrypt( $str );<br/><br/>

        $str = decrypt( $str );<br/>
    </code>

    <h3>Helpers:</h3>
    <table cellpadding="0" cellspacing="1" border="0" style="width:100%" class="tableborder">
        <tr>
            <th style="width:50%;">&nbsp;</th>
            <th style="width:50%;">&nbsp;</th>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="encryption.html">Encryption</a></li>
                </ul>
            </td>
            <td class="td">
                <ul>
                    <li><a href="getPassthruUrl.html">getPassthruUrl</a></li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="td">
                <ul>
                    <li><a href="#">cleanupSurveyParticipantsBySurveyRecord</a></li>
                </ul>
            </td>
            <td class="td">
                &nbsp;
            </td>
        </tr>
    </table>

    <h2>Using $CORE->getCss & $CORE->getJs</h2>
    <p>The Core comes preloaded with Bootstrap 3.3.1 and JQuery 1.11.1 which can be included into your plugin using the <var>$Core->getCss()</var> and <var>$Core->getJs()</var> functions.</p>

    <code>
require_once "../../redcap_connect.php";<br/>
require_once '../Core/bootstrap.php';<br/><br/>

require_once APP_PATH_DOCROOT . 'ProjectGeneral/header.php';<br/><br/>

$Core->getCss();<br/>
        <br/>
        < BODY CONTENT USING BOOTSTRAP HERE >
        <br/><br/>
$Core->getJs();<br/>
        require_once APP_PATH_DOCROOT . 'ProjectGeneral/footer.php';<br/>
    </code>
    <p class="important"><strong>Note:</strong> The <kbd>ProjectGeneral/header.php</kbd> and <kbd>ProjectGeneral/footer.php</kbd> includes are only required if you are encapsulating a plugin within the Redcap interface.  For standalone plugins these includes should be omitted. </p>

    <h2>Overriding CORE Libraries & Helpers</h2>
    <p>The CORE libraries can be overidden with local versions of those libraries.</p>

    <h3>Local Location</h3>
    <p>Local libraries are placed in the Libraries/ folder</p>
    <p>Local helpers are placed in the Helpers/ folder</p>
    <code>
        // Include single library<br />
        $Core->Libraries(array('Encrypt','Project'));<br /><br />

        // If /local_dir/Libraries/Encrypt.php exists, this points to the runEncryption function in that class<br />
        $Core->Encrypt->runEncryption();><br /><br />

        // If /local_dir/Libraries/Project.php does not exist, this creates a new object from the /redcap/plugins/core/Libraries/Project.php file<br />
        $myProject = new $Core->Project();
    </code>


</div>
<!-- END CONTENT -->



<div id="footer">
</div>

</body>
</html>